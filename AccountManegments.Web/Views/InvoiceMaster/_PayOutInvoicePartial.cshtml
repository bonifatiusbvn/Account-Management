@model List<AccountManagement.DBContext.Models.ViewModels.InvoiceMaster.SupplierInvoiceModel>
@using AccountManegments.Web.Models;
@inject IHttpContextAccessor Accessor;
@inject UserSession _userSession

@{
    ViewData["Title"] = "_PayOutInvoicePartial";
}

<tr class="payoutinvoicerow">
    <td>
        <span class="row-number me-5">ROWNUMBER.</span>
    </td>
    <td style="width:630px">
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" id="OpeningBalance-ROWID" value="OpeningBalance" name="paymenttype-ROWID">
            <label class="form-check-label" for="OpeningBalance-ROWID">Opening Balance</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" id="Online-ROWID" value="NEFT/RTGS" name="paymenttype-ROWID" checked>
            <label class="form-check-label" for="Online-ROWID">NEFT/RTGS</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" id="Cheque-ROWID" value="Cheque" name="paymenttype-ROWID">
            <label class="form-check-label" for="Cheque-ROWID">Cheque</label>
        </div>
        <input type="hidden" id="paymenttypeid-ROWID">
    </td>
    <td style="width:360px">
        @{
            DateTime invoiceDate = DateTime.Now;
            string formattedDate = invoiceDate.ToString("yyyy-MM-dd");
        }
        <input type="date" id="txtdate-ROWID" class="form-control" name="txtdate" value="@formattedDate" />
    </td>
    <td style ="width:360px">
        <select id="textPayoutSiteName" name="textPayoutSiteName" class="form-control">
            <option value="" disabled>Select Site</option>
        </select>
    </td>
    <td style="width:360px">
        <input type="text" class="form-control" id="txtdescription-ROWID" placeholder="Description" />
    </td>
    <td style="width:360px">
        <div class="input-group">
            <input type="text" class="form-control" id="txtpayoutamount-ROWID" name="txtpayoutamount" placeholder="Amount">
        </div>
        <span id="spnpayout-ROWID" class="text-danger"></span>
    </td>
    <td style="width:135px">
        <a class="form-control btn text-primary" onclick="removePayout(this)" style="text-align: center; display: flex; justify-content: center;">
            <i class="lni lni-trash"></i>
        </a>
    </td>
</tr>


<script type="text/javascript">
    GetPayoutSiteList();

    function GetPayoutSiteList() {
        $.ajax({
            url: '/SiteMaster/GetSiteNameList',
            method: 'GET',
            success: function (result) {

                $(".payoutinvoicerow").each(function () {
                    var $Sitedropdown = $(this).find("select[id^='textPayoutSiteName']");
                    $Sitedropdown.empty();
                    $Sitedropdown.append('<option value="">All Site</option>');

                    result.forEach(function (data) {
                        $Sitedropdown.append('<option value="' + data.siteId + '" data-payoutcompany-name="' + data.siteName + '">' + data.siteName + '</option>');
                    });
                });
            },
            error: function (err) {
                console.error("Failed to fetch company list: ", err);
            }
        });
    }

</script>


