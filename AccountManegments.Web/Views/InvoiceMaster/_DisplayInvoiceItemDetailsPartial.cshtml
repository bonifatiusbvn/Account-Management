@model List<AccountManagement.DBContext.Models.ViewModels.ItemMaster.POItemDetailsModel>
@* <style>
    div.item-name {
        width: 20px;
        word-wrap: break-word;
    }
</style> *@

@foreach (var item in Model)
{
    <tr id="templateRow_@Convert.ToInt64(item.RowNumber + 1)" class="product" data-product-id="@item.ItemId" onclick="updateProductTotalAmount(this)">
        <td scope="row" class="product-id text-start">@Convert.ToInt64(item.RowNumber + 1)</td>
        <td class="text-start" style="width:230px">
            <p>@item.ItemName</p>

            @if (item.ItemDescription == null || item.ItemDescription == "")
            {
                <div class="row align-items-center" data-item-id="@item.ItemId" id="ProductDesBtn" onclick="fn_AddInvoiceProductDescription(this)">
                    <div class="col-sm-1" style="margin-top : -5px;">
                        <i class="lni lni-plus text-success" style="font-size: 10px; text-shadow: 1px 1px 1px #000;"></i>
                    </div>
                    <div class="col-sm-10" style="margin-left:-5px;">
                        <p class="text-primary mb-0"><b>Item Description</b></p>
                    </div>
                </div>
                <div class="row align-items-center" id="ProductDesText" data-item-id="@item.ItemId" style="display:none;">
                    <div class="col-sm-10" style=" margin-right:-7px;">
                        <input type="text" class="form-control" placeholder="Description" id="txtInvoiceProductDes"  />
                    </div>
                    <div class="col-sm-1">
                        <div class="text-danger" style="cursor: pointer; font-size:20px;" data-item-id="@item.ItemId" onclick="fn_AddInvoiceProductDescription(this)">x</div>
                    </div>
                </div>
            }
            else
            {
                <div class="row align-items-center" data-item-id="@item.ItemId" id="ProductDesBtn" style="display:none;" onclick="fn_AddInvoiceProductDescription(this)">
                    <div class="col-sm-1" style="margin-top : -5px;">
                        <i class="lni lni-plus text-success" style="font-size: 10px; text-shadow: 1px 1px 1px #000;"></i>
                    </div>
                    <div class="col-sm-10" style="margin-left:-5px;">
                        <p class="text-primary mb-0"><b>Item Description</b></p>
                    </div>
                </div>
                <div class="row align-items-center" id="ProductDesText" data-item-id="@item.ItemId" style="display:flex" )">
                    <div class="col-sm-10" style=" margin-right:-7px;">
                        <input type="text" class="form-control" placeholder="Description" id="txtInvoiceProductDes" value="@item.ItemDescription" />
                    </div>
                    <div class="col-sm-1">
                        <div class="text-danger" data-item-id="@item.ItemId" style="cursor: pointer; font-size:20px;" onclick="fn_AddInvoiceProductDescription(this)">x</div>
                    </div>
                </div>
            }
        </td>
        <td class="text-center">
            <input type="hidden" class="form-control" id="txtItemId" readonly value="@item.ItemId" />
            <input type="hidden" class="form-control" id="UnitTypeId" readonly value="@item.UnitType" />
            <input type="text" class="form-control bg-light" id="txtHSNcode" value="@item.Hsncode" readonly style="width: 75px;" />
        </td>
        <td class="text-start">
            <div class="">
                @if (item.Quantity == 0)
                {
                    <input type="number" class="product-quantity form-control" id="txtproductquantity" value="" min="1" oninput="preventEmptyValue(this)" style="width:80px;">
                }
                else
                {
                    <input type="number" class="product-quantity form-control" id="txtproductquantity" value="@item.Quantity" min="1" oninput="preventEmptyValue(this)" style="width:80px;">
                }
            </div>
        </td>
        <td class="text-start">
            <div class="">
                <input type="hidden" id="txtunittype_@item.ItemId" value="@item.UnitType" />
                <select class="form-control" id="txtPOUnitType_@item.ItemId" style="width: 100px;" onclick="UnitTypeDropdown('@item.ItemId')">
                    <option value="@item.UnitType">@item.UnitTypeName</option>
                </select>
            </div>
        </td>
        <td class="text-start">
            <input type="text" class="form-control" id="txtproductamount" value="@item.PricePerUnit" oninput="preventEmptyValue(this)" style="width:100px;" />
            <input type="hidden" class="form-control" id="productamount" value="@item.PricePerUnit" />
        </td>
        <td class="text-start">
            @if (item.DiscountAmount != null)
            {
                <input type="text" class="product-discountamount form-control" id="txtdiscountamount" value="@item.DiscountAmount" style="width:100px;" />
            }
            else
            {
                <input type="text" class="form-control" id="txtdiscountamount" value="0" style="width:100px;" />
            }
        </td>
        <td class="text-start">
            @if (item.DiscountPer != null)
            {
                <input type="text" class="product-discountpercentage form-control" id="txtdiscountpercentage" value="@item.DiscountPer" style="width:100px;" />
            }
            else
            {
                <input type="text" class="form-control " id="txtdiscountpercentage" value="0" style="width:100px;" />
            }
        </td>
        <td class="text-start">
            <input type="text" class="product-Gstper form-control" id="txtgst" value="@item.GstPercentage" oninput="preventEmptyValue(this)" style="width:100px;" />
        </td>
        <td>
            <input type="number" class="product-Gstamount form-control bg-light" id="txtgstAmount" value="@item.Gstamount" readonly style="width:130px;" />
        </td>
        <td class="text-start">
            <input type="text" class="product-producttotalamount form-control bg-light" id="txtproducttotalamount" value="@item.TotalAmount" readonly style="width:130px;" />
        </td>
        <td class="product-removal">
            <a class="btn text-primary remove-btn" onclick="removeItem(this)"><i class="lni lni-trash"></i></a>
        </td>
    </tr>
}


@section Scripts {
    <script src="~/moduls/invoicemasterscript.js" asp-append-version="true"></script>
}
