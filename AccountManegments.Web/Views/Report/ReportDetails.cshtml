@using AccountManegments.Web.Models;
@inject IHttpContextAccessor Accessor;
@inject UserSession _userSession
@model IEnumerable<AccountManagement.DBContext.Models.ViewModels.PurchaseRequest.PurchaseRequestModel>
@{
    ViewData["Title"] = "ReportDetails";
    Layout = "~/Views/Shared/Main_Layout.cshtml";
}

<style>
    .sticky-footer {
    position: sticky;
    bottom: 0;
    background-color: white;
    z-index: 1; 
    }

    .table-responsive {
        max-height: 400px;
        overflow-y: auto;
        position: relative;
    }
</style>

<div class="">
    <div class="">
        <div class=" radius-10 w-100">
            <div class="d-flex align-items-center">
            </div>
            <div class="my-3 border-bottom"></div>
            <div class="">
                <div class="row">
                    <div class="col-12 col-lg-12 col-md-12 col-xl-12">
                        <div class="card radius-10 w-100">
                            <div class="card-body">
                                <div class="row w-100 ac-view-list card radius-10 w-100">
                                    <div class="row g-2">
                                        <div class="col-12">
                                            <div class="card-body">
                                                <div class="row g-3 align-items-center">
                                                    <div class="col-12 col-lg-2">
                                                        <select class="form-select" id="textReportSiteName" name="textReportSiteName">
                                                            <option selected disabled value="">Select Site</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-12 col-lg-2">
                                                        <select class="form-select" id="textReportCompanyName" name="textReportCompanyName">
                                                            <option selected disabled value="">Select Company</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-12 col-lg-2">
                                                        <select class="form-select" id="textReportSupplierName" name="textReportSupplierName">
                                                            <option selected disabled value="">Select Supplier</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-12 col-lg-1 d-flex align-items-center">
                                                        <input class="nav-radio form-check-input Returns active me-2" data-bs-toggle="tab" role="tab" type="radio" name="flexRadioDefault" id="currentMonthRadio" href="#GetCurrentMonthInvoicelist" aria-selected="true">
                                                        <label class="form-check-label" for="currentMonthRadio">
                                                            Current Month
                                                        </label>
                                                    </div>
                                                    <div class="col-12 col-lg-5">
                                                        <div class="d-flex align-items-center gap-2">
                                                            <div class="d-flex align-items-center">
                                                                <input class="nav-radio form-check-input Returns active me-2" type="radio" data-bs-toggle="tab" role="tab" name="flexRadioDefault" id="betweenMonthRadio" aria-selected="true">
                                                                <label class="form-check-label" for="betweenMonthRadio">Between Date</label>
                                                            </div>
                                                            <div>
                                                                <input class="form-control date-input" placeholder="dd-mm-yyyy" type="date" id="startDate" style="display:none;">
                                                            </div>
                                                            <div>
                                                                <input class="form-control date-input" placeholder="dd-mm-yyyy" type="date" id="endDate" style="display:none;">
                                                            </div>
                                                            <div>
                                                                <a class="btn btn-primary nav-btn" id="searchBetweenDate" data-bs-toggle="tab" role="tab" href="#GetBetweenDatesList" style="display:none;">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">
                                                                        <path fill="currentColor" d="m19.6 21l-6.3-6.3q-.75.6-1.725.95T9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l6.3 6.3zM9.5 14q1.875 0 3.188-1.312T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14" />
                                                                    </svg>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div><!--end row-->
                                            </div>
                                        </div>
                                    </div>
                                    <!--end row-->
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table align-middle mb-0">
                                                <thead class="table-light btn-primary">
                                                    <tr>
                                                        <th>Invoice No</th>
                                                        <th>Date</th>
                                                        <th>You Gave</th>
                                                        <th>You Get</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="reportInvoiceListbody">
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

    document.addEventListener('DOMContentLoaded', function () {
        const BetweenMonth = document.getElementById('betweenMonthRadio');
        const searchDateInputs = document.querySelectorAll('.date-input');
        const radios = document.querySelectorAll('input[name="flexRadioDefault"]');
        const SearchButton = document.getElementById('searchBetweenDate');
        const dropdowns = document.querySelectorAll('.form-select');

        function toggleDateInputs() {
            clearDates();
            if (BetweenMonth.checked) {
                searchDateInputs.forEach(input => input.style.display = 'block');
                SearchButton.style.display = 'block';
            } else {
                searchDateInputs.forEach(input => input.style.display = 'none');
                SearchButton.style.display = 'none';
            }
        }

        radios.forEach(radio => {
            radio.addEventListener('change', toggleDateInputs);
        });

        toggleDateInputs();
    });

    function clearDates() {
        document.getElementById('startDate').value = '';
        document.getElementById('endDate').value = '';
    }

</script>

<script src="~/assets/js/jquery.min.js"></script>
<script src="~/moduls/report.js" asp-append-version="true"></script>