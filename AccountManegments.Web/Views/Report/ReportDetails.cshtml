@using AccountManegments.Web.Models;
@inject IHttpContextAccessor Accessor;
@inject UserSession _userSession
@model IEnumerable<AccountManagement.DBContext.Models.ViewModels.PurchaseRequest.PurchaseRequestModel>
@{
    ViewData["Title"] = "ReportDetails";
    Layout = "~/Views/Shared/Main_Layout.cshtml";
}
<style>
    /* Container to wrap the table */
    .table-container {
        position: relative;
        height: 450px;
        overflow: auto;
    }

    /* Fix the header */
    .dataTables_scrollHeadInner {
        overflow: hidden;
    }

    /* Sticky footer */
    .table-container tfoot {
        position: sticky;
        bottom: 0;
        background-color: white;
        z-index: 1;
    }
</style>
<input type="hidden" id="txtReportSiteId" value="@UserSession.SiteId" hidden />
<input type="hidden" id="txtReportUserId" value="@_userSession.UserId" hidden />
<input type="hidden" id="txtReportSiteName" value="@UserSession.SiteName" hidden />



<div class="">
    <div class=" radius-10 w-100">
        <div class="d-flex align-items-center">
        </div>
        <div class="my-3 border-bottom"></div>
        <div class="row">

            <section class="shop-page">
                <div class="shop-container">
                    <div class="card shadow-sm border-0">
                        <div class="card-body">
                            <div class="shop-cart">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="checkout-details">
                                            <div class="card">
                                                <div class="card-header border-bottom">
                                                    <h2 class="h5">Payment Report</h2>
                                                </div>
                                                <div class="card-body">
                                                    <ul class="nav nav-pills mb-3 row" role="tablist">
                                                        <li class="nav-item col-md-2" role="presentation">
                                                            <select id="textReportCompanyName" name="textReportCompanyName" class="form-control">
                                                                <option value="">Select Company</option>
                                                            </select>
                                                        </li>
                                                        <li class="nav-item col-md-2" role="presentation">
                                                            <input type="text" id="textReportSupplierName" name="textReportSupplierName" class="form-control" placeholder="Supplier" />
                                                            <input type="hidden" id="textReportSupplierNameHidden" name="textReportSupplierNameHidden" />
                                                        </li>
                                                        <li class="nav-item col-md-2" role="presentation">
                                                            <select id="textReportGroupList" name="textReportGroupList" class="form-control">
                                                                <option value="">Select Group</option>
                                                            </select>
                                                        </li>
                                                        <li class="nav-item col-md-2" role="presentation">
                                                            <select id="timePeriodDropdown" name="timePeriodDropdown" class="form-control">
                                                                <option value="" selected disabled>Search By</option>
                                                                <option value="This Month">This Month</option>
                                                                <option value="This Year">This Year</option>
                                                                <option value="Between Date">Between Date</option>
                                                                <option value="Between Year">Between Year</option>
                                                            </select>
                                                        </li>

                                                        <li class="nav-item col-md-2 d-flex align-items-center gap-2" role="presentation" id="dateYearControls">
                                                            <input class="form-control date-input" placeholder="dd-mm-yyyy" type="date" id="startDate" style="display:none;width: 135px;">
                                                            <input class="form-control date-input" placeholder="dd-mm-yyyy" type="date" id="endDate" style="display:none;width: 135px;">
                                                            <select id="yearDropdown" class="form-control" style="display:none; width: 110px;">
                                                                <option value="">Select Year</option>
                                                            </select>
                                                            <button class="btn btn-primary nav-btn" id="searchReportButton" data-bs-toggle="tab" role="tab">
                                                                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">
                                                                    <path fill="currentColor" d="m19.6 21l-6.3-6.3q-.75.6-1.725.95T9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l6.3 6.3zM9.5 14q1.875 0 3.188-1.312T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14" />
                                                                </svg>
                                                            </button>
                                                            <button type="button" class="btn btn-primary nav-btn" id="ResetButton" onclick="fn_ResetAllDropdown()" data-bs-toggle="tab" role="tab">Reset</button>
                                                        </li>
                                                        <li class="nav-item col-md-2 d-flex align-items-center gap-2" role="presentation">
                                                            <button type="button" class="btn btn-primary nav-btn" id="ResetButton" onclick="openOB()" data-bs-toggle="tab" role="tab">Opening Balance</button>
                                                        </li>
                                                    </ul>

                                                    <div class="tab-content" id="pills-tabContent">
                                                        <div class="tab-pane fade show active" id="credit-card" role="tabpanel">
                                                            <div id="example2_wrapper" class="dataTables_wrapper dt-bootstrap5">
                                                                <div class="row">
                                                                    <div class="col-sm-12">
                                                                        <table id="tblinvoice" class="table table-striped table-bordered dataTable" role="grid" aria-describedby="example2_info">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>InvoiceNo</th>
                                                                                    <th>Date</th>
                                                                                    <th>Site</th>
                                                                                    <th>Group</th>
                                                                                    <th>Supplier</th>
                                                                                    <th>Credit</th>
                                                                                    <th>Debit</th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                            </tbody>
                                                                            <tfoot>
                                                                                <tr>
                                                                                    <th colspan="5" style="text-align:right">Total:</th>
                                                                                    <th id="totalCredit"></th>
                                                                                    <th id="totalDebit"></th>
                                                                                </tr>
                                                                            </tfoot>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="card">
                                                                <div class="card-body">
                                                                    <div class="card border-0">
                                                                        <div class="card-body">
                                                                            <a class="btn btn-primary" id="AddNewRowforPayOutInvoice" onclick="AddNewRowforPayOutInvoicebtn()">
                                                                                <i class="lni lni-circle-plus"></i>PayOut
                                                                            </a>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">

                                                                        <div class="card-body pt-0">
                                                                            <div class="table-responsive">
                                                                                <table class="table align-middle mb-0">
                                                                                    <thead class="table-light btn-primary">
                                                                                        <tr>
                                                                                            <th>#</th>
                                                                                            <th>Payment Status</th>
                                                                                            <th>Date</th>
                                                                                            <th>Description</th>
                                                                                            <th>Amount</th>
                                                                                            <th>Action</th>
                                                                                    </thead>
                                                                                    <tbody id="payoutpartialView">
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                            <div class="hstack gap-2 justify-content-end d-print-none mt-4" id="payoutsubmitbutton" style="display:none;">
                                                                                <button type="button" class="btn btn-primary" id="creditdebitsubmitbtn" style="width: 150px;height: 40px;" onclick="InsertPayOutDetailsReport()">Submit</button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!--end row-->
                                            </div>
                                        </div>
                                    </div>
                                </div>
            </section>

            <form id="updatePayoutForm">
                <div class="modal fade show" tabindex="-1" id="updatePayoutModal" role="dialog" aria-labelledby="myLargeModalLabel" aria-modal="true" aria-hidden="true" style="display:none;">
                    <div class="modal-dialog modal-md modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header bg-primary-subtle p-3">
                                <h5 class="modal-title" id="flipModalLabel">Edit Payout</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <input type="text" class="form-control" id="EdittxtpayoutSiteId" hidden />
                                <input type="text" class="form-control" id="EdittxtpayoutId" hidden />
                                <input type="text" class="form-control" id="EdittxtpayoutUpdatedBy" value="@_userSession.UserId" hidden />
                                <input type="hidden" id="EdittxtpayoutSupplierNameHidden" name="EdittxtpayoutSupplierNameHidden" />
                                <input type="hidden" id="EdittxtpayoutCompanyNameHidden" name="EdittxtpayoutCompanyNameHidden" />
                                <div class="row mb-3">
                                    <div class="col-lg-12 col-12">
                                        <label class="me-2">Payment Status : </label>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" id="Online" value="NEFT/RTGS" name="Editpayoutpaymenttype">
                                            <label class="form-check-label" for="Online">NEFT/RTGS</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" id="Cheque" value="Cheque" name="Editpayoutpaymenttype">
                                            <label class="form-check-label" for="Cheque">Cheque</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-lg-4 col-12">
                                        <label class="form-label">Description</label>
                                        <div class="form-label">
                                            <input type="text" class="form-control" id="Edittxtpayoutdescription" placeholder="Description" />
                                        </div>
                                    </div>
                                    <div class="col-lg-5 col-12">
                                        <label class="form-label">Date</label>
                                        <input type="date" id="Edittxtpayoutdate" class="form-control" name="Edittxtpayoutdate" />
                                    </div>
                                    <div class="col-lg-3 col-12">
                                        <label class="form-label">Total Amount</label>
                                        <input type="text" class="form-control" id="Edittxtpayoutamount" name="Edittxtpayoutamount">
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" onclick="UpdatePayoutInvoice()" id="btnitem">Save</button>
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
            </form>
            <form id="OPBalanceForm">
                <div class="modal fade" tabindex="-1" id="OBPayoutModal" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-md modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header bg-primary-subtle p-3">
                                <h5 class="modal-title" id="flipModalLabel">Add Operning Balance</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="row mb-3">
                                    <div class="col-lg-4 col-12">
                                        <label class="form-label">Description</label>
                                        <div class="form-label">
                                            <input type="text" class="form-control" id="Edittxtpayoutdescription" placeholder="Description" />
                                        </div>
                                    </div>
                                    <div class="col-lg-5 col-12">
                                        <label class="form-label">Date</label>
                                        <input type="date" id="Edittxtpayoutdate" class="form-control" name="Edittxtpayoutdate" />
                                    </div>
                                    <div class="col-lg-3 col-12">
                                        <label class="form-label">Total Amount</label>
                                        <input type="text" class="form-control" id="Edittxtpayoutamount" name="Edittxtpayoutamount">
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" onclick="UpdatePayoutInvoice()" id="btnitem">Save</button>
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
            </form>
        </div>
    </div>
</div>




@section Scripts {
    <script src="~/moduls/report.js" asp-append-version="true"></script>
}
